<!-- HTML do seu calendário -->
<!-- Calendário -->
<section class="wrap-calendar" style="padding: 70px;">
    <div id="calendar"></div>
</section>


<script>
    // Faz uma chamada AJAX para obter as datas e URLs do servidor
    function getDatesFromServer() {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
            var dates = JSON.parse(xhr.responseText);
            renderCalendar(dates); // Renderiza o calendário com as datas clicáveis
          } else {
            console.error('Erro na requisição AJAX');
          }
        }
      };
      xhr.open('GET', 'get_dates.php', true);
      xhr.send();
    }
    
    // Renderiza o calendário com as datas clicáveis
    function renderCalendar(dates) {
      // Lógica para renderizar o calendário
      var today = new Date();
	  var currentYear = today.getFullYear();
	  var currentMonth = today.getMonth();
  
	  // Obtém a quantidade de dias no mês atual
	  var daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  
	  // Cria o cabeçalho do calendário com o mês e ano atual
	  var header = document.createElement('h2');
	  header.textContent = new Date(currentYear, currentMonth).toLocaleDateString('pt-BR', {
	    month: 'long',
	    year: 'numeric'
	  });
	  var calendarContainer = document.getElementById('calendar'); // Defina a variável calendarContainer
	  calendarContainer.appendChild(header);
  
	  // Cria a tabela do calendário
	  var table = document.createElement('table');
  
	  // Cria a linha do cabeçalho da semana
	  var headerRow = document.createElement('tr');
	  var weekdays = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab'];
	  for (var i = 0; i < weekdays.length; i++) {
	    var th = document.createElement('th');
	    th.textContent = weekdays[i];
	    headerRow.appendChild(th);
	  }
	  table.appendChild(headerRow);
  
	  // Obtém o dia da semana do primeiro dia do mês
	  var firstDayOfWeek = new Date(currentYear, currentMonth, 1).getDay();
  
	  // Calcula o número de células necessárias no calendário
	  var totalCells = daysInMonth + firstDayOfWeek;
  
	  // Cria as células do calendário
	  for (var day = 1; day <= totalCells; day++) {
	    if ((day - 1) % 7 === 0) {
	      // Cria uma nova linha no início de cada semana
	      var row = document.createElement('tr');
	    }
  
	    var cell = document.createElement('td');
	    if (day > firstDayOfWeek) {
	      // Define o número do dia para células além do primeiro dia da semana
	      cell.textContent = day - firstDayOfWeek;
	      cell.id = currentYear + '-' + (currentMonth + 1).toString().padStart(2, '0') + '-' + (day - firstDayOfWeek).toString().padStart(2, '0');
	      cell.classList.add('clickable-date'); // Adiciona uma classe para facilitar a estilização das datas clicáveis
	    }
  
	    // Adiciona a célula à linha atual
	    row.appendChild(cell);
  
	    if (day % 7 === 0 || day === totalCells) {
	      // Adiciona a linha à tabela no final de cada semana ou no final do calendário
	      table.appendChild(row);
	    }
	  }
  
	  // Adiciona a tabela ao contêiner do calendário
	  calendarContainer.appendChild(table);
  
	  // Adiciona o comportamento de clique às datas clicáveis
	  var clickableDates = document.getElementsByClassName('clickable-date');
	  for (var i = 0; i < clickableDates.length; i++) {
	    clickableDates[i].addEventListener('click', function(event) {
	      var clickedDate = event.target.id;
	      var url = findUrlByDate(clickedDate, dates);
	      if (url) {
	        window.location.href = url; // Redireciona para a URL associada à data
	      }
	    });
	  }
    }
    
    // Função para pesquisar a URL associada à data
    function findUrlByDate(date, dates) {
      for (var i = 0; i < dates.length; i++) {
        if (dates[i].data === date) {
          return dates[i].url;
        }
      }
      return null; // Retorna null se a data não estiver encontrada
    }
    
    // Chama a função para obter as datas do servidor quando a página é carregada
    document.addEventListener('DOMContentLoaded', function() {
      getDatesFromServer();
    });
</script>